<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Encyclopedia</title>

    <!-- Bootstrap & jQuery -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        body {
            background-color: rgb(245, 250, 255);
        }
        #catPic {
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>

<body>
    <div class="text-center mt-4">
        <img id="catPic" src="cat.jpg" alt="a cute cat" width="300" height="180">
        <p class="text-muted mt-2">Click the button to discover new cat facts üêæ</p>
    </div>
    
    <div class="container text-center mt-4">
        <h2 class="mb-3 text-primary">Amazing Cat Facts</h2>
        <button id="fetchFactsBtn" class="btn btn-success mb-3">Load Cat Facts</button>     

        <table class="table table-striped table-hover border" id="factsTable">
            <thead class="table-success">
                <tr>
                    <th>#</th>
                    <th>Did You Know?</th>
                </tr>
            </thead>
            <tbody>
                <!-- facts will appear here -->
            </tbody>
        </table>
    </div>

    <script>
        $(function() {
            $('#fetchFactsBtn').on('click', function() {

                fetch('https://brianobruno.github.io/cats.json')
                    .then(response => response.json())
                    .then(data => {
                        console.log("Fetched data:", data);

                        const factsList = data.facts || [];
                        factsList.sort((a, b) => a.factId - b.factId);

                        const tbody = $('#factsTable tbody');
                        tbody.empty();

                        factsList.forEach(fact => {
                            const row = `
                                <tr>
                                    <td>${fact.factId}</td>
                                    <td>${fact.text}</td>
                                </tr>
                            `;
                            tbody.append(row);
                        });

                        // update cat picture if available
                        if (data.catPhoto) {
                            $('#catPic').attr('src', data.catPhoto);
                        } else {
                            console.log("No image found in data.");
                        }
                    })
                    .catch(err => {
                        console.error("Error fetching API:", err);
                    });
            });
        });
    </script>
</body>
</html>
